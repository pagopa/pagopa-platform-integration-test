{"uid":"47f10619841ce60f","name":"User tries to pay a cart with two RPTs but the payment closure fails","fullName":"User pays a payment carts without stamps on nodoInviaCarrelloRPT: User tries to pay a cart with two RPTs but the payment closure fails","historyId":"ae779321c01c7b13d2540400a56aa37f","time":{"start":1741916212507,"stop":1741916219392,"duration":6885},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 214, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 214, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Given systems up","time":{"start":1741916212508,"stop":1741916213373,"duration":865},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Given a cart of RPTs non-multibeneficiary","time":{"start":1741916213373,"stop":1741916213373,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And a single RPT of type BBT with 1 transfers of which none are stamps","time":{"start":1741916213373,"stop":1741916213373,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And a single RPT of type BBT with 1 transfers of which none are stamps","time":{"start":1741916213374,"stop":1741916213374,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When the user tries to pay a cart of RPTs on EC website","time":{"start":1741916213374,"stop":1741916218951,"duration":5577},"status":"passed","steps":[],"attachments":[{"uid":"6ed86b2e03912155","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Sent request","source":"6ed86b2e03912155.txt","type":"text/plain","size":15123},{"uid":"1aa8b378eaa5e458","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Received response","source":"1aa8b378eaa5e458.txt","type":"text/plain","size":409}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Then the user is redirected on Checkout not completing the multibeneficiary payment","time":{"start":1741916218951,"stop":1741916219392,"duration":441},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 214, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[{"uid":"b2b3f46ac6ab9326","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment]: on sessionId: [aad3bdcc-5a93-4a30-8622-7013f7057531] - Received response","source":"b2b3f46ac6ab9326.txt","type":"text/plain","size":5807},{"uid":"c7bfcbf7c46cc3d0","name":"Received response","source":"c7bfcbf7c46cc3d0.attach","type":"text/html","size":5677}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"tag","value":"nodo_invia_carrello_rpt"},{"name":"tag","value":"runnable"},{"name":"tag","value":"unhappy_path"},{"name":"feature","value":"User pays a payment carts without stamps on nodoInviaCarrelloRPT"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":35,"broken":0,"skipped":0,"passed":39,"unknown":0,"total":74},"items":[{"uid":"6f647b8265466433","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/379//#testresult/6f647b8265466433","status":"passed","time":{"start":1741830179582,"stop":1741830203193,"duration":23611}},{"uid":"aa84b5da080f450d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/378//#testresult/aa84b5da080f450d","status":"passed","time":{"start":1741743816020,"stop":1741743840851,"duration":24831}},{"uid":"9affcda246ccf018","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/377//#testresult/9affcda246ccf018","status":"passed","time":{"start":1741657506675,"stop":1741657534021,"duration":27346}},{"uid":"daac6ac88e215f68","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/376//#testresult/daac6ac88e215f68","status":"passed","time":{"start":1741570908053,"stop":1741570931705,"duration":23652}},{"uid":"64adf2c6157d1341","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/375//#testresult/64adf2c6157d1341","status":"passed","time":{"start":1741484485570,"stop":1741484509235,"duration":23665}},{"uid":"5addd95c27d76851","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/374//#testresult/5addd95c27d76851","status":"passed","time":{"start":1741398048303,"stop":1741398072964,"duration":24661}},{"uid":"6a9f930723a88782","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/373//#testresult/6a9f930723a88782","status":"passed","time":{"start":1741311894964,"stop":1741311922249,"duration":27285}},{"uid":"7489caac34d8cf64","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/372//#testresult/7489caac34d8cf64","status":"passed","time":{"start":1741225498292,"stop":1741225525750,"duration":27458}},{"uid":"b6c1fea57f5c076","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/371//#testresult/b6c1fea57f5c076","status":"passed","time":{"start":1741139074605,"stop":1741139101143,"duration":26538}},{"uid":"351a9538c08cd27e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/370//#testresult/351a9538c08cd27e","status":"passed","time":{"start":1741087223286,"stop":1741087248039,"duration":24753}},{"uid":"b58ba732eb112515","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/369//#testresult/b58ba732eb112515","status":"passed","time":{"start":1741052709446,"stop":1741052736828,"duration":27382}},{"uid":"5b25b0e6ac8db576","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/368//#testresult/5b25b0e6ac8db576","status":"passed","time":{"start":1740992275716,"stop":1740992299598,"duration":23882}},{"uid":"6e88c652d044a07d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/367//#testresult/6e88c652d044a07d","status":"passed","time":{"start":1740966196849,"stop":1740966220795,"duration":23946}},{"uid":"f2a6fa28eecc7e48","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/366//#testresult/f2a6fa28eecc7e48","status":"passed","time":{"start":1740879896700,"stop":1740879924263,"duration":27563}},{"uid":"83be75472421e798","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/365//#testresult/83be75472421e798","status":"passed","time":{"start":1740793373519,"stop":1740793397136,"duration":23617}},{"uid":"7a2eb839a1e0551a","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/364//#testresult/7a2eb839a1e0551a","status":"failed","statusDetails":"AssertionError: health-check systems or subscription-key errors\n","time":{"start":1740707447013,"stop":1740707448261,"duration":1248}},{"uid":"b1c2ae9fc4183dba","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/363//#testresult/b1c2ae9fc4183dba","status":"passed","time":{"start":1740620673474,"stop":1740620704266,"duration":30792}},{"uid":"531116fe2ef26e73","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/362//#testresult/531116fe2ef26e73","status":"passed","time":{"start":1740534254680,"stop":1740534280888,"duration":26208}},{"uid":"7814ba4e96f420ab","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/361//#testresult/7814ba4e96f420ab","status":"passed","time":{"start":1740447823040,"stop":1740447848200,"duration":25160}},{"uid":"9e78b1fd985b020d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/360//#testresult/9e78b1fd985b020d","status":"passed","time":{"start":1740361416423,"stop":1740361441183,"duration":24760}}]},"tags":["runnable","nodo_invia_carrello_rpt","unhappy_path"]},"source":"47f10619841ce60f.json","parameterValues":[]}