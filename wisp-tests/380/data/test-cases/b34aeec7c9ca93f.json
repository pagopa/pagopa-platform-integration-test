{"uid":"b34aeec7c9ca93f","name":"User tries the payment, then retries again the flow but fails","fullName":"User pays a single payment without stamps via nodoInviaRPT: User tries the payment, then retries again the flow but fails","historyId":"b04b9cb2c280ca9b4f0c8aa05d3ed651","time":{"start":1741916374090,"stop":1741916380899,"duration":6809},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 182, in user_tried_to_pay_RPT\n    nm1_to_nmu_succeeds(context)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 257, in nm1_to_nmu_succeeds\n    steputils.exec_nm1_to_nmu(context, 'user')\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 182, in user_tried_to_pay_RPT\n    nm1_to_nmu_succeeds(context)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 257, in nm1_to_nmu_succeeds\n    steputils.exec_nm1_to_nmu(context, 'user')\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Given systems up","time":{"start":1741916374091,"stop":1741916374954,"duration":863},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Given a single RPT of type BBT with 1 transfers of which 0 are stamps","time":{"start":1741916374954,"stop":1741916374955,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And the user tried to pay the RPT on EC website","time":{"start":1741916374955,"stop":1741916380898,"duration":5943},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 182, in user_tried_to_pay_RPT\n    nm1_to_nmu_succeeds(context)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 257, in nm1_to_nmu_succeeds\n    steputils.exec_nm1_to_nmu(context, 'user')\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[{"uid":"e36a71580f43554b","name":"Step: [the user tried to pay the RPT on EC website] - Sent request","source":"e36a71580f43554b.txt","type":"text/plain","size":7852},{"uid":"2d771ae046501e53","name":"Step: [the user tried to pay the RPT on EC website] - Received response","source":"2d771ae046501e53.txt","type":"text/plain","size":373},{"uid":"be53ec2574ef5300","name":"Step: [the user tried to pay the RPT on EC website]: on sessionId: [1e0b51a1-048e-4d64-8a26-74cccd416155] - Received response","source":"be53ec2574ef5300.txt","type":"text/plain","size":5807},{"uid":"67d4de061e76fb3b","name":"Received response","source":"67d4de061e76fb3b.attach","type":"text/html","size":5677}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"When send activatePaymentNoticeV2 requests","time":{"start":1741916380899,"stop":1741916380899,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Then conversion to new model fails in wisp-converter","time":{"start":1741916380899,"stop":1741916380899,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"tag","value":"nodo_invia_rpt"},{"name":"tag","value":"runnable"},{"name":"tag","value":"to_fix"},{"name":"tag","value":"unhappy_path"},{"name":"feature","value":"User pays a single payment without stamps via nodoInviaRPT"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":35,"broken":0,"skipped":0,"passed":39,"unknown":0,"total":74},"items":[{"uid":"a4e9f6a7d3939f25","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/379//#testresult/a4e9f6a7d3939f25","status":"passed","time":{"start":1741830605503,"stop":1741830611350,"duration":5847}},{"uid":"bf2f525617c90e59","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/378//#testresult/bf2f525617c90e59","status":"passed","time":{"start":1741744261903,"stop":1741744268471,"duration":6568}},{"uid":"fcabdaf7bfa46fa6","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/377//#testresult/fcabdaf7bfa46fa6","status":"passed","time":{"start":1741658002792,"stop":1741658010804,"duration":8012}},{"uid":"ad7150b7d8a07e9a","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/376//#testresult/ad7150b7d8a07e9a","status":"passed","time":{"start":1741571332923,"stop":1741571338738,"duration":5815}},{"uid":"ef8d87244bc2d8c0","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/375//#testresult/ef8d87244bc2d8c0","status":"passed","time":{"start":1741484908940,"stop":1741484914721,"duration":5781}},{"uid":"5e1fae001dfbdb40","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/374//#testresult/5e1fae001dfbdb40","status":"passed","time":{"start":1741398490971,"stop":1741398497469,"duration":6498}},{"uid":"841acd02c4027a7e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/373//#testresult/841acd02c4027a7e","status":"passed","time":{"start":1741312393557,"stop":1741312401772,"duration":8215}},{"uid":"5cfe54f2e49624b9","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/372//#testresult/5cfe54f2e49624b9","status":"passed","time":{"start":1741225995733,"stop":1741226003661,"duration":7928}},{"uid":"c6b59b7a56b6a097","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/371//#testresult/c6b59b7a56b6a097","status":"passed","time":{"start":1741139558513,"stop":1741139566142,"duration":7629}},{"uid":"e31380bcd9fbcb3e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/370//#testresult/e31380bcd9fbcb3e","status":"passed","time":{"start":1741087659791,"stop":1741087666015,"duration":6224}},{"uid":"57d8be6f11940edd","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/369//#testresult/57d8be6f11940edd","status":"passed","time":{"start":1741053207000,"stop":1741053214997,"duration":7997}},{"uid":"999f74375068f017","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/368//#testresult/999f74375068f017","status":"passed","time":{"start":1740992703597,"stop":1740992709602,"duration":6005}},{"uid":"8c4e698b1ee3aa30","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/367//#testresult/8c4e698b1ee3aa30","status":"passed","time":{"start":1740966627536,"stop":1740966633537,"duration":6001}},{"uid":"82c2400ea5236dbe","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/366//#testresult/82c2400ea5236dbe","status":"passed","time":{"start":1740880397225,"stop":1740880405218,"duration":7993}},{"uid":"32a0c8c5c2b52495","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/365//#testresult/32a0c8c5c2b52495","status":"passed","time":{"start":1740793799545,"stop":1740793805598,"duration":6053}},{"uid":"e53f9a2ef227152b","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/364//#testresult/e53f9a2ef227152b","status":"failed","statusDetails":"AssertionError: health-check systems or subscription-key errors\n","time":{"start":1740707478816,"stop":1740707480089,"duration":1273}},{"uid":"778178a976395180","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/363//#testresult/778178a976395180","status":"passed","time":{"start":1740621154657,"stop":1740621166006,"duration":11349}},{"uid":"733ed9c099d6ab6","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/362//#testresult/733ed9c099d6ab6","status":"passed","time":{"start":1740534737968,"stop":1740534744926,"duration":6958}},{"uid":"8b78eb105ec43899","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/361//#testresult/8b78eb105ec43899","status":"passed","time":{"start":1740448279455,"stop":1740448286780,"duration":7325}},{"uid":"e1a94ea3cc108ecf","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/360//#testresult/e1a94ea3cc108ecf","status":"passed","time":{"start":1740361866249,"stop":1740361872732,"duration":6483}}]},"tags":["runnable","nodo_invia_rpt","to_fix","unhappy_path"]},"source":"b34aeec7c9ca93f.json","parameterValues":[]}