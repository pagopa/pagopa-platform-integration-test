{"uid":"6064fbc1c3c43ace","name":"User tries two time to pay the same RPT but the conversion to the new model fails","fullName":"User pays a single payment without stamps via nodoInviaRPT: User tries two time to pay the same RPT but the conversion to the new model fails","historyId":"57d427effb15caaa9d7a8dd561191e0b","time":{"start":1741916367331,"stop":1741916374090,"duration":6759},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 189, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 189, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Given systems up","time":{"start":1741916367331,"stop":1741916368191,"duration":860},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Given a single RPT of type BBT with 1 transfers of which 0 are stamps","time":{"start":1741916368191,"stop":1741916368192,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When the user tries to pay the RPT on EC website","time":{"start":1741916368192,"stop":1741916373652,"duration":5460},"status":"passed","steps":[],"attachments":[{"uid":"3b4fd1c6d0df3522","name":"Step: [the user tries to pay the RPT on EC website] - Sent request","source":"3b4fd1c6d0df3522.txt","type":"text/plain","size":7852},{"uid":"3622a9f3c0c1faa5","name":"Step: [the user tries to pay the RPT on EC website] - Received response","source":"3622a9f3c0c1faa5.txt","type":"text/plain","size":373}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Then the user is redirected on Checkout completing the payment","time":{"start":1741916373652,"stop":1741916374089,"duration":437},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 189, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[{"uid":"8c735b3c27c4c28c","name":"Step: [the user is redirected on Checkout completing the payment]: on sessionId: [4a8def46-5680-4443-88a8-276b19cb5ca4] - Received response","source":"8c735b3c27c4c28c.txt","type":"text/plain","size":5807},{"uid":"4b95740c14a1494c","name":"Received response","source":"4b95740c14a1494c.attach","type":"text/html","size":5677}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"And conversion to new model fails in wisp-converter","time":{"start":1741916374090,"stop":1741916374090,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"tag","value":"nodo_invia_rpt"},{"name":"tag","value":"runnable"},{"name":"tag","value":"unhappy_path"},{"name":"feature","value":"User pays a single payment without stamps via nodoInviaRPT"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":35,"broken":0,"skipped":0,"passed":39,"unknown":0,"total":74},"items":[{"uid":"a64169c8f41ae663","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/379//#testresult/a64169c8f41ae663","status":"passed","time":{"start":1741830582639,"stop":1741830605503,"duration":22864}},{"uid":"3c3bf9326f67734c","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/378//#testresult/3c3bf9326f67734c","status":"passed","time":{"start":1741744238128,"stop":1741744261903,"duration":23775}},{"uid":"3da505411346b0be","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/377//#testresult/3da505411346b0be","status":"passed","time":{"start":1741657976653,"stop":1741658002792,"duration":26139}},{"uid":"3bec0fb60b6ff92b","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/376//#testresult/3bec0fb60b6ff92b","status":"passed","time":{"start":1741571310172,"stop":1741571332923,"duration":22751}},{"uid":"f0a9c748d0991f7e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/375//#testresult/f0a9c748d0991f7e","status":"passed","time":{"start":1741484886386,"stop":1741484908939,"duration":22553}},{"uid":"4f22f5b5ed41f41e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/374//#testresult/4f22f5b5ed41f41e","status":"passed","time":{"start":1741398467490,"stop":1741398490970,"duration":23480}},{"uid":"dfca96ad216d1305","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/373//#testresult/dfca96ad216d1305","status":"passed","time":{"start":1741312366995,"stop":1741312393557,"duration":26562}},{"uid":"9bfc66f8e1566705","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/372//#testresult/9bfc66f8e1566705","status":"passed","time":{"start":1741225969560,"stop":1741225995733,"duration":26173}},{"uid":"3391303df5675bb3","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/371//#testresult/3391303df5675bb3","status":"passed","time":{"start":1741139532602,"stop":1741139558513,"duration":25911}},{"uid":"26a3acf3c02f234c","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/370//#testresult/26a3acf3c02f234c","status":"passed","time":{"start":1741087636598,"stop":1741087659790,"duration":23192}},{"uid":"5580821918adb690","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/369//#testresult/5580821918adb690","status":"passed","time":{"start":1741053180958,"stop":1741053206999,"duration":26041}},{"uid":"2c28b11548f95f90","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/368//#testresult/2c28b11548f95f90","status":"passed","time":{"start":1740992680752,"stop":1740992703596,"duration":22844}},{"uid":"a7b157c2f6f8e5f7","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/367//#testresult/a7b157c2f6f8e5f7","status":"passed","time":{"start":1740966604641,"stop":1740966627536,"duration":22895}},{"uid":"c55ee4dd0b37b4c6","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/366//#testresult/c55ee4dd0b37b4c6","status":"passed","time":{"start":1740880371045,"stop":1740880397225,"duration":26180}},{"uid":"b7871cce9ff24397","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/365//#testresult/b7871cce9ff24397","status":"passed","time":{"start":1740793776782,"stop":1740793799544,"duration":22762}},{"uid":"dd233083f1cacad4","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/364//#testresult/dd233083f1cacad4","status":"failed","statusDetails":"AssertionError: health-check systems or subscription-key errors\n","time":{"start":1740707477542,"stop":1740707478815,"duration":1273}},{"uid":"1d352c6d4ae91654","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/363//#testresult/1d352c6d4ae91654","status":"passed","time":{"start":1740621130448,"stop":1740621154657,"duration":24209}},{"uid":"eaf71116c8b17145","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/362//#testresult/eaf71116c8b17145","status":"passed","time":{"start":1740534714062,"stop":1740534737968,"duration":23906}},{"uid":"374525dc87d425bc","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/361//#testresult/374525dc87d425bc","status":"passed","time":{"start":1740448255368,"stop":1740448279454,"duration":24086}},{"uid":"907490239b3db4b","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/360//#testresult/907490239b3db4b","status":"passed","time":{"start":1740361842749,"stop":1740361866249,"duration":23500}}]},"tags":["runnable","nodo_invia_rpt","unhappy_path"]},"source":"6064fbc1c3c43ace.json","parameterValues":[]}