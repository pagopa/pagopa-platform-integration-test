{"uid":"7fb91eb3489d50cd","name":"User tries to pay a cart with two RPTs but the payment closure fails, then tries again successfully","fullName":"User pays a payment carts without stamps on nodoInviaCarrelloRPT: User tries to pay a cart with two RPTs but the payment closure fails, then tries again successfully","historyId":"8f7bec8e2290f1fed21601114f61a466","time":{"start":1741916202711,"stop":1741916209644,"duration":6933},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 214, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 214, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Given systems up","time":{"start":1741916202712,"stop":1741916203578,"duration":866},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Given a cart of RPTs non-multibeneficiary","time":{"start":1741916203578,"stop":1741916203578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And a single RPT of type BBT with 1 transfers of which none are stamps","time":{"start":1741916203578,"stop":1741916203578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And a single RPT of type BBT with 1 transfers of which none are stamps","time":{"start":1741916203578,"stop":1741916203579,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And the user tries to pay a cart of RPTs on EC website","time":{"start":1741916203579,"stop":1741916209190,"duration":5611},"status":"passed","steps":[],"attachments":[{"uid":"24bc26957406504b","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Sent request","source":"24bc26957406504b.txt","type":"text/plain","size":15119},{"uid":"ca1536f160d5d734","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Received response","source":"ca1536f160d5d734.txt","type":"text/plain","size":409}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"And the user is redirected on Checkout not completing the multibeneficiary payment","time":{"start":1741916209190,"stop":1741916209643,"duration":453},"status":"failed","statusMessage":"AssertionError: The status code is not 302. Current value: 200.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 214, in user_redirected_to_checkout\n    steputils.exec_nm1_to_nmu(context, actor)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 835, in exec_nm1_to_nmu\n    check_status_code(context, actor, '302')\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 18, in check_status_code\n    assert int(\n           ^^^^\n        expected_status_code) == actual_status_code, f'The status code is not {expected_status_code}. Current value: {actual_status_code}.'\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[{"uid":"5abde451ce96405a","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment]: on sessionId: [435aafaa-e153-4404-a350-ce424d45a558] - Received response","source":"5abde451ce96405a.txt","type":"text/plain","size":5807},{"uid":"7bb92c98a3ea4ddc","name":"Received response","source":"7bb92c98a3ea4ddc.attach","type":"text/html","size":5677}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"When the user tries to pay a cart of RPTs on EC website","time":{"start":1741916209644,"stop":1741916209644,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Then the user is redirected on Checkout completing the multibeneficiary payment","time":{"start":1741916209644,"stop":1741916209644,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"tag","value":"happy_path"},{"name":"tag","value":"nodo_invia_carrello_rpt"},{"name":"tag","value":"runnable"},{"name":"feature","value":"User pays a payment carts without stamps on nodoInviaCarrelloRPT"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":35,"broken":0,"skipped":0,"passed":39,"unknown":0,"total":74},"items":[{"uid":"3afcf66bb30f53c6","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/379//#testresult/3afcf66bb30f53c6","status":"passed","time":{"start":1741830128387,"stop":1741830177145,"duration":48758}},{"uid":"a3aa8e5387e4a518","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/378//#testresult/a3aa8e5387e4a518","status":"passed","time":{"start":1741743762217,"stop":1741743813171,"duration":50954}},{"uid":"3acca3cdbd8a7a3b","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/377//#testresult/3acca3cdbd8a7a3b","status":"passed","time":{"start":1741657445146,"stop":1741657502577,"duration":57431}},{"uid":"2a73ee2f0bfa0a66","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/376//#testresult/2a73ee2f0bfa0a66","status":"passed","time":{"start":1741570856753,"stop":1741570905598,"duration":48845}},{"uid":"9e24df033d9df839","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/375//#testresult/9e24df033d9df839","status":"passed","time":{"start":1741484434550,"stop":1741484483204,"duration":48654}},{"uid":"b5ba450ef5c14aea","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/374//#testresult/b5ba450ef5c14aea","status":"passed","time":{"start":1741397994605,"stop":1741398045455,"duration":50850}},{"uid":"af110e9866531529","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/373//#testresult/af110e9866531529","status":"passed","time":{"start":1741311832986,"stop":1741311890861,"duration":57875}},{"uid":"36eea04ad9836785","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/372//#testresult/36eea04ad9836785","status":"passed","time":{"start":1741225437174,"stop":1741225494213,"duration":57039}},{"uid":"4857f424202bc8a2","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/371//#testresult/4857f424202bc8a2","status":"passed","time":{"start":1741139015213,"stop":1741139070868,"duration":55655}},{"uid":"31e2f2c1002ca476","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/370//#testresult/31e2f2c1002ca476","status":"passed","time":{"start":1741087170093,"stop":1741087220589,"duration":50496}},{"uid":"fb0c69f3d107d55c","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/369//#testresult/fb0c69f3d107d55c","status":"passed","time":{"start":1741052647459,"stop":1741052705296,"duration":57837}},{"uid":"2c46971d4e174295","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/368//#testresult/2c46971d4e174295","status":"passed","time":{"start":1740992223980,"stop":1740992273148,"duration":49168}},{"uid":"470dee033981531","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/367//#testresult/470dee033981531","status":"passed","time":{"start":1740966144951,"stop":1740966194279,"duration":49328}},{"uid":"ed5132f90e9adc85","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/366//#testresult/ed5132f90e9adc85","status":"passed","time":{"start":1740879835525,"stop":1740879892531,"duration":57006}},{"uid":"57bef19dadf6c23e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/365//#testresult/57bef19dadf6c23e","status":"passed","time":{"start":1740793322182,"stop":1740793371084,"duration":48902}},{"uid":"3c66c3e2b46d5b4a","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/364//#testresult/3c66c3e2b46d5b4a","status":"failed","statusDetails":"AssertionError: health-check systems or subscription-key errors\n","time":{"start":1740707443231,"stop":1740707444497,"duration":1266}},{"uid":"5a7470b74668b25a","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/363//#testresult/5a7470b74668b25a","status":"passed","time":{"start":1740620617678,"stop":1740620671024,"duration":53346}},{"uid":"16766d308812d6eb","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/362//#testresult/16766d308812d6eb","status":"passed","time":{"start":1740534198798,"stop":1740534252177,"duration":53379}},{"uid":"ec0d721c1daee52e","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/361//#testresult/ec0d721c1daee52e","status":"passed","time":{"start":1740447767813,"stop":1740447819865,"duration":52052}},{"uid":"7c66ac088bf917ca","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/360//#testresult/7c66ac088bf917ca","status":"passed","time":{"start":1740361362438,"stop":1740361413263,"duration":50825}}]},"tags":["runnable","nodo_invia_carrello_rpt","happy_path"]},"source":"7fb91eb3489d50cd.json","parameterValues":[]}