{"uid":"7915f26408f3ac7e","name":"User tries to pay a cart with two RPTs but the payment closure fails, then tries again successfully","fullName":"User pays a payment carts without stamps on nodoInviaCarrelloRPT: User tries to pay a cart with two RPTs but the payment closure fails, then tries again successfully","historyId":"8f7bec8e2290f1fed21601114f61a466","time":{"start":1743817414356,"stop":1743817472200,"duration":57844},"status":"failed","statusMessage":"AssertionError: There are not events with business process receipt-ok.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 207, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: There are not events with business process receipt-ok.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 207, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n","steps":[{"name":"Given systems up","time":{"start":1743817414356,"stop":1743817415601,"duration":1245},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Given a cart of RPTs non-multibeneficiary","time":{"start":1743817415601,"stop":1743817415601,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And a single RPT of type BBT with 1 transfers of which none are stamps","time":{"start":1743817415601,"stop":1743817415602,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And a single RPT of type BBT with 1 transfers of which none are stamps","time":{"start":1743817415602,"stop":1743817415602,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And the user tries to pay a cart of RPTs on EC website","time":{"start":1743817415602,"stop":1743817416484,"duration":882},"status":"passed","steps":[],"attachments":[{"uid":"d0b6f717af1efa74","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Sent request","source":"d0b6f717af1efa74.txt","type":"text/plain","size":15123},{"uid":"4db5fcf54c5f6e14","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Received response","source":"4db5fcf54c5f6e14.txt","type":"text/plain","size":409}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"And the user is redirected on Checkout not completing the multibeneficiary payment","time":{"start":1743817416484,"stop":1743817441483,"duration":24999},"status":"passed","steps":[],"attachments":[{"uid":"685c805ba1b160e5","name":"Received response","source":"685c805ba1b160e5.attach","type":"text/plain","size":131},{"uid":"7c63c19215cf758","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment]: on IUV: [550136079923249] - Received response","source":"7c63c19215cf758.txt","type":"text/plain","size":41232},{"uid":"d728b352db419c90","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Sent request","source":"d728b352db419c90.txt","type":"text/plain","size":232},{"uid":"b3ee1467b8c82fdd","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Received response","source":"b3ee1467b8c82fdd.txt","type":"text/plain","size":354},{"uid":"6898679ca9f0218","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Sent request","source":"6898679ca9f0218.txt","type":"text/plain","size":821},{"uid":"ee445d52cae5cbea","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Received response","source":"ee445d52cae5cbea.txt","type":"text/plain","size":953},{"uid":"b9a6a501b577db8e","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Sent request","source":"b9a6a501b577db8e.txt","type":"text/plain","size":821},{"uid":"8e651191e097110a","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Received response","source":"8e651191e097110a.txt","type":"text/plain","size":953},{"uid":"2987996614df814","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment]: on IUV: [550136079923249] - Received response","source":"2987996614df814.txt","type":"text/plain","size":45923},{"uid":"f18f0914ec50fbba","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Sent request","source":"f18f0914ec50fbba.txt","type":"text/plain","size":1288},{"uid":"c101fc791c100485","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment] - Received response","source":"c101fc791c100485.txt","type":"text/plain","size":104},{"uid":"4bbe9cc4a457bb90","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment]: on IUV: [550136079923249] - Received response","source":"4bbe9cc4a457bb90.txt","type":"text/plain","size":72898},{"uid":"8561172363dcec57","name":"Step: [the user is redirected on Checkout not completing the multibeneficiary payment]: on IUV: [625066647119048] - Received response","source":"8561172363dcec57.txt","type":"text/plain","size":72898}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":13,"hasContent":true,"attachmentStep":false},{"name":"When the user tries to pay a cart of RPTs on EC website","time":{"start":1743817441483,"stop":1743817442325,"duration":842},"status":"passed","steps":[],"attachments":[{"uid":"e7d19f1a1c661740","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Sent request","source":"e7d19f1a1c661740.txt","type":"text/plain","size":15123},{"uid":"44223228d23186e3","name":"Step: [the user tries to pay a cart of RPTs on EC website] - Received response","source":"44223228d23186e3.txt","type":"text/plain","size":409}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Then the user is redirected on Checkout completing the multibeneficiary payment","time":{"start":1743817442325,"stop":1743817472199,"duration":29874},"status":"failed","statusMessage":"AssertionError: There are not events with business process receipt-ok.\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.2/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 207, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n","steps":[],"attachments":[{"uid":"abf92a23d1328128","name":"Received response","source":"abf92a23d1328128.attach","type":"text/plain","size":131},{"uid":"823bf4dddc04a88e","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment]: on IUV: [550136079923249] - Received response","source":"823bf4dddc04a88e.txt","type":"text/plain","size":117875},{"uid":"de95ba6056d8f880","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment]: on IUV: [625066647119048] - Received response","source":"de95ba6056d8f880.txt","type":"text/plain","size":117875},{"uid":"d53c6a5fca4e5259","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Sent request","source":"d53c6a5fca4e5259.txt","type":"text/plain","size":232},{"uid":"8807ec003394b8cd","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Received response","source":"8807ec003394b8cd.txt","type":"text/plain","size":354},{"uid":"26c673ba3699f156","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Sent request","source":"26c673ba3699f156.txt","type":"text/plain","size":821},{"uid":"206f4b95f0bacfe6","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Received response","source":"206f4b95f0bacfe6.txt","type":"text/plain","size":953},{"uid":"64e5d9a2e5b257a7","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Sent request","source":"64e5d9a2e5b257a7.txt","type":"text/plain","size":821},{"uid":"450703a0fb0d762a","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Received response","source":"450703a0fb0d762a.txt","type":"text/plain","size":953},{"uid":"c94e9bee46f94a2b","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment]: on IUV: [550136079923249] - Received response","source":"c94e9bee46f94a2b.txt","type":"text/plain","size":122565},{"uid":"2dab182203d54459","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment]: on IUV: [625066647119048] - Received response","source":"2dab182203d54459.txt","type":"text/plain","size":122565},{"uid":"3719ad5c8b5e354e","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Sent request","source":"3719ad5c8b5e354e.txt","type":"text/plain","size":1288},{"uid":"fca980948872549d","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment] - Received response","source":"fca980948872549d.txt","type":"text/plain","size":104},{"uid":"e325372194d5991c","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment]: on IUV: [550136079923249] - Received response","source":"e325372194d5991c.txt","type":"text/plain","size":151007},{"uid":"3e1067f7870cd2ec","name":"Step: [the user is redirected on Checkout completing the multibeneficiary payment]: on IUV: [625066647119048] - Received response","source":"3e1067f7870cd2ec.txt","type":"text/plain","size":151007}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":15,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":32,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"tag","value":"happy_path"},{"name":"tag","value":"nodo_invia_carrello_rpt"},{"name":"tag","value":"runnable"},{"name":"feature","value":"User pays a payment carts without stamps on nodoInviaCarrelloRPT"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":36,"broken":0,"skipped":0,"passed":60,"unknown":0,"total":96},"items":[{"uid":"c68f52c854bbe5e0","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/401//#testresult/c68f52c854bbe5e0","status":"passed","time":{"start":1743731079242,"stop":1743731148147,"duration":68905}},{"uid":"29cc2e2fb356bbcc","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/400//#testresult/29cc2e2fb356bbcc","status":"passed","time":{"start":1743644577745,"stop":1743644628395,"duration":50650}},{"uid":"e19efd15c5b211b2","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/399//#testresult/e19efd15c5b211b2","status":"passed","time":{"start":1743558156458,"stop":1743558206480,"duration":50022}},{"uid":"882e4c63009f9574","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/398//#testresult/882e4c63009f9574","status":"passed","time":{"start":1743471795580,"stop":1743471844317,"duration":48737}},{"uid":"72a1cd9acd5e3b04","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/397//#testresult/72a1cd9acd5e3b04","status":"passed","time":{"start":1743385398412,"stop":1743385448984,"duration":50572}},{"uid":"102e1b0dfb8f6409","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/396//#testresult/102e1b0dfb8f6409","status":"passed","time":{"start":1743299076455,"stop":1743299134460,"duration":58005}},{"uid":"1fa3a5bfa1c872f5","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/395//#testresult/1fa3a5bfa1c872f5","status":"passed","time":{"start":1743212541193,"stop":1743212590330,"duration":49137}},{"uid":"ad7a6148fd6d3eb2","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/394//#testresult/ad7a6148fd6d3eb2","status":"passed","time":{"start":1743126272098,"stop":1743126329933,"duration":57835}},{"uid":"f7c6572d9e74eb21","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/393//#testresult/f7c6572d9e74eb21","status":"passed","time":{"start":1743039772679,"stop":1743039823927,"duration":51248}},{"uid":"9c8b83f5d5f5687f","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/392//#testresult/9c8b83f5d5f5687f","status":"passed","time":{"start":1742953342171,"stop":1742953390982,"duration":48811}},{"uid":"75439348141d369b","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/391//#testresult/75439348141d369b","status":"passed","time":{"start":1742866934407,"stop":1742866983040,"duration":48633}},{"uid":"724c4e07e48beebd","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/390//#testresult/724c4e07e48beebd","status":"passed","time":{"start":1742780547005,"stop":1742780595521,"duration":48516}},{"uid":"6f36fb60ddc03700","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/389//#testresult/6f36fb60ddc03700","status":"passed","time":{"start":1742694157922,"stop":1742694209426,"duration":51504}},{"uid":"d7aa9e0722573a7d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/388//#testresult/d7aa9e0722573a7d","status":"passed","time":{"start":1742607716913,"stop":1742607767273,"duration":50360}},{"uid":"6de885cef99e2f6d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/387//#testresult/6de885cef99e2f6d","status":"passed","time":{"start":1742521454543,"stop":1742521511836,"duration":57293}},{"uid":"164edf54aaf52009","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/386//#testresult/164edf54aaf52009","status":"passed","time":{"start":1742435043310,"stop":1742435100249,"duration":56939}},{"uid":"6b606e183547390d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/385//#testresult/6b606e183547390d","status":"passed","time":{"start":1742348563616,"stop":1742348615061,"duration":51445}},{"uid":"9c67939681f9b177","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/384//#testresult/9c67939681f9b177","status":"passed","time":{"start":1742262134020,"stop":1742262182667,"duration":48647}},{"uid":"886296ad9b539880","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/383//#testresult/886296ad9b539880","status":"passed","time":{"start":1742175826687,"stop":1742175881809,"duration":55122}},{"uid":"30f2622e705b475d","reportUrl":"https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/382//#testresult/30f2622e705b475d","status":"passed","time":{"start":1742089451180,"stop":1742089508902,"duration":57722}}]},"tags":["runnable","nodo_invia_carrello_rpt","happy_path"]},"source":"7915f26408f3ac7e.json","parameterValues":[]}