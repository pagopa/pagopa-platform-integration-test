{
  "uid" : "ef6914bcbc4ee340",
  "name" : "User pays a cart with single RPT without stamp that exists already in GPD",
  "fullName" : "User pays a payment carts from existing payment position via nodoInviaCarrelloRPT: User pays a cart with single RPT without stamp that exists already in GPD",
  "historyId" : "044be0da7076e3bb06270fb16271119a",
  "time" : {
    "start" : 1745744151060,
    "stop" : 1745744176881,
    "duration" : 25821
  },
  "status" : "failed",
  "statusMessage" : "AssertionError: There are not events with business process receipt-ok.\n",
  "statusTrace" : "  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 195, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n",
  "flaky" : true,
  "newFailed" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "AssertionError: There are not events with business process receipt-ok.\n",
    "statusTrace" : "  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 195, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n",
    "steps" : [ {
      "name" : "Given systems up",
      "time" : {
        "start" : 1745744151060,
        "stop" : 1745744152537,
        "duration" : 1477
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "Given a cart of RPTs non-multibeneficiary",
      "time" : {
        "start" : 1745744152537,
        "stop" : 1745744152537,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And a single RPT of type BBT with 1 transfers of which none are stamps",
      "time" : {
        "start" : 1745744152537,
        "stop" : 1745744152538,
        "duration" : 1
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And an existing payment position related to first RPT with segregation code equals to 48 and state equals to VALID",
      "time" : {
        "start" : 1745744152538,
        "stop" : 1745744153204,
        "duration" : 666
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "195115aa757d9726",
        "name" : "Step: [an existing payment position related to first RPT with segregation code equals to 48 and state equals to VALID] - Sent request",
        "source" : "195115aa757d9726.txt",
        "type" : "text/plain",
        "size" : 1258
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When the user tries to pay a cart of RPTs on EC website",
      "time" : {
        "start" : 1745744153204,
        "stop" : 1745744154095,
        "duration" : 891
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "8206d6f0d782b8b1",
        "name" : "Step: [the user tries to pay a cart of RPTs on EC website] - Sent request",
        "source" : "8206d6f0d782b8b1.txt",
        "type" : "text/plain",
        "size" : 8198
      }, {
        "uid" : "2dda46701fe857ec",
        "name" : "Step: [the user tries to pay a cart of RPTs on EC website] - Received response",
        "source" : "2dda46701fe857ec.txt",
        "type" : "text/plain",
        "size" : 409
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Then the user is redirected on Checkout completing the payment",
      "time" : {
        "start" : 1745744154095,
        "stop" : 1745744176880,
        "duration" : 22785
      },
      "status" : "failed",
      "statusMessage" : "AssertionError: There are not events with business process receipt-ok.\n",
      "statusTrace" : "  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 195, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "1f1df537a31fe8a4",
        "name" : "Received response",
        "source" : "1f1df537a31fe8a4.attach",
        "type" : "text/plain",
        "size" : 131
      }, {
        "uid" : "d8e816b99feac810",
        "name" : "Step: [the user is redirected on Checkout completing the payment]: on IUV: [985135948074704] - Received response",
        "source" : "d8e816b99feac810.txt",
        "type" : "text/plain",
        "size" : 29105
      }, {
        "uid" : "b7bc6bc7e75bbc7",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Sent request",
        "source" : "b7bc6bc7e75bbc7.txt",
        "type" : "text/plain",
        "size" : 167
      }, {
        "uid" : "b06876b4b17f74a4",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Received response",
        "source" : "b06876b4b17f74a4.txt",
        "type" : "text/plain",
        "size" : 242
      }, {
        "uid" : "b233985a99b3d0da",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Sent request",
        "source" : "b233985a99b3d0da.txt",
        "type" : "text/plain",
        "size" : 821
      }, {
        "uid" : "5473d870d59c11f9",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Received response",
        "source" : "5473d870d59c11f9.txt",
        "type" : "text/plain",
        "size" : 952
      }, {
        "uid" : "22076e9137940db7",
        "name" : "Step: [the user is redirected on Checkout completing the payment]: on IUV: [985135948074704] - Received response",
        "source" : "22076e9137940db7.txt",
        "type" : "text/plain",
        "size" : 31451
      }, {
        "uid" : "239f1c7ee9f7f0c7",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Sent request",
        "source" : "239f1c7ee9f7f0c7.txt",
        "type" : "text/plain",
        "size" : 1250
      }, {
        "uid" : "36629b2475dfffa0",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Received response",
        "source" : "36629b2475dfffa0.txt",
        "type" : "text/plain",
        "size" : 104
      }, {
        "uid" : "41b199b1193d7a51",
        "name" : "Step: [the user is redirected on Checkout completing the payment]: on IUV: [985135948074704] - Received response",
        "source" : "41b199b1193d7a51.txt",
        "type" : "text/plain",
        "size" : 47133
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 10,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    }, {
      "name" : "And the debt position is closed",
      "time" : {
        "start" : 1745744176881,
        "stop" : 1745744176881,
        "duration" : 0
      },
      "status" : "skipped",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 7,
    "attachmentsCount" : 13,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "severity",
    "value" : "normal"
  }, {
    "name" : "tag",
    "value" : "happy_path"
  }, {
    "name" : "tag",
    "value" : "nodo_invia_carrello_rpt"
  }, {
    "name" : "tag",
    "value" : "runnable"
  }, {
    "name" : "feature",
    "value" : "User pays a payment carts from existing payment position via nodoInviaCarrelloRPT"
  }, {
    "name" : "framework",
    "value" : "behave"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "history" : {
      "statistic" : {
        "failed" : 60,
        "broken" : 0,
        "skipped" : 0,
        "passed" : 60,
        "unknown" : 0,
        "total" : 120
      },
      "items" : [ {
        "uid" : "8c0ee24488239cf5",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/429//#testresult/8c0ee24488239cf5",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745717569938,
          "stop" : 1745717596280,
          "duration" : 26342
        }
      }, {
        "uid" : "d40a4b6ce76d58f2",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/424//#testresult/d40a4b6ce76d58f2",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745631148525,
          "stop" : 1745631176790,
          "duration" : 28265
        }
      }, {
        "uid" : "c517464b9d7428da",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/423//#testresult/c517464b9d7428da",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745544784716,
          "stop" : 1745544809968,
          "duration" : 25252
        }
      }, {
        "uid" : "e133f7a017b6a6d7",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/422//#testresult/e133f7a017b6a6d7",
        "status" : "passed",
        "time" : {
          "start" : 1745458374673,
          "stop" : 1745458404333,
          "duration" : 29660
        }
      }, {
        "uid" : "10772bcff1b9a712",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/421//#testresult/10772bcff1b9a712",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745371974397,
          "stop" : 1745372003905,
          "duration" : 29508
        }
      }, {
        "uid" : "dfbb88d90c6424e2",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/420//#testresult/dfbb88d90c6424e2",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745285587918,
          "stop" : 1745285612052,
          "duration" : 24134
        }
      }, {
        "uid" : "ece4bbf93c5c7c11",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/419//#testresult/ece4bbf93c5c7c11",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745199195516,
          "stop" : 1745199223433,
          "duration" : 27917
        }
      }, {
        "uid" : "33fdaad9ad46bd4a",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/418//#testresult/33fdaad9ad46bd4a",
        "status" : "passed",
        "time" : {
          "start" : 1745112766423,
          "stop" : 1745112794289,
          "duration" : 27866
        }
      }, {
        "uid" : "b3467677edbbe445",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/417//#testresult/b3467677edbbe445",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745026345620,
          "stop" : 1745026374043,
          "duration" : 28423
        }
      }, {
        "uid" : "ec6659652df69c33",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/416//#testresult/ec6659652df69c33",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744939968601,
          "stop" : 1744939993243,
          "duration" : 24642
        }
      }, {
        "uid" : "9079ce1fb05319e",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/415//#testresult/9079ce1fb05319e",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744853562837,
          "stop" : 1744853589528,
          "duration" : 26691
        }
      }, {
        "uid" : "73643db2e8359ccf",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/414//#testresult/73643db2e8359ccf",
        "status" : "passed",
        "time" : {
          "start" : 1744806361822,
          "stop" : 1744806394953,
          "duration" : 33131
        }
      }, {
        "uid" : "a70d7daa2aa9b311",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/413//#testresult/a70d7daa2aa9b311",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744767196684,
          "stop" : 1744767222168,
          "duration" : 25484
        }
      }, {
        "uid" : "1eb08de1bee916b1",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/412//#testresult/1eb08de1bee916b1",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744680779086,
          "stop" : 1744680807859,
          "duration" : 28773
        }
      }, {
        "uid" : "9a4a13cf5cb92e61",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/411//#testresult/9a4a13cf5cb92e61",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744594380275,
          "stop" : 1744594406431,
          "duration" : 26156
        }
      }, {
        "uid" : "617ca0d3f96a3dd7",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/410//#testresult/617ca0d3f96a3dd7",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744509075879,
          "stop" : 1744509100883,
          "duration" : 25004
        }
      }, {
        "uid" : "7e53ddd761a691c",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/409//#testresult/7e53ddd761a691c",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744421530753,
          "stop" : 1744421555889,
          "duration" : 25136
        }
      }, {
        "uid" : "e2dbf9c2c2dd9157",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/408//#testresult/e2dbf9c2c2dd9157",
        "status" : "passed",
        "time" : {
          "start" : 1744335165309,
          "stop" : 1744335193814,
          "duration" : 28505
        }
      }, {
        "uid" : "49254a6d0afd873b",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/407//#testresult/49254a6d0afd873b",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744248759690,
          "stop" : 1744248783928,
          "duration" : 24238
        }
      }, {
        "uid" : "9672311e1a076b88",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/406//#testresult/9672311e1a076b88",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744162358180,
          "stop" : 1744162381909,
          "duration" : 23729
        }
      } ]
    },
    "tags" : [ "runnable", "nodo_invia_carrello_rpt", "happy_path" ]
  },
  "source" : "ef6914bcbc4ee340.json",
  "parameterValues" : [ ]
}