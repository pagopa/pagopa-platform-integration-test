{
  "uid" : "65d9d5d9abe1a039",
  "name" : "Scenario: User pays a cart with single RPT with one stamp that exists already in GPD",
  "fullName" : "User pays a payment carts from existing payment position via nodoInviaCarrelloRPT: Scenario: User pays a cart with single RPT with one stamp that exists already in GPD",
  "historyId" : "45edd8d9564ca836a31fbab586c8fde7",
  "time" : {
    "start" : 1745744204740,
    "stop" : 1745744229273,
    "duration" : 24533
  },
  "status" : "failed",
  "statusMessage" : "AssertionError: There are not events with business process receipt-ok.\n",
  "statusTrace" : "  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 195, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n",
  "flaky" : true,
  "newFailed" : true,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "AssertionError: There are not events with business process receipt-ok.\n",
    "statusTrace" : "  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 195, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n",
    "steps" : [ {
      "name" : "Given systems up",
      "time" : {
        "start" : 1745744204741,
        "stop" : 1745744205825,
        "duration" : 1084
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "Given a cart of RPTs non-multibeneficiary",
      "time" : {
        "start" : 1745744205826,
        "stop" : 1745744205826,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And a single RPT of type BBT with 2 transfers of which 1 are stamps",
      "time" : {
        "start" : 1745744205826,
        "stop" : 1745744205826,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And an existing payment position related to first RPT with segregation code equals to 48 and state equals to VALID",
      "time" : {
        "start" : 1745744205826,
        "stop" : 1745744206386,
        "duration" : 560
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "e64f91c4874a5948",
        "name" : "Step: [an existing payment position related to first RPT with segregation code equals to 48 and state equals to VALID] - Sent request",
        "source" : "e64f91c4874a5948.txt",
        "type" : "text/plain",
        "size" : 1696
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When the user tries to pay a cart of RPTs on EC website",
      "time" : {
        "start" : 1745744206386,
        "stop" : 1745744207012,
        "duration" : 626
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "fff7a2846fc35929",
        "name" : "Step: [the user tries to pay a cart of RPTs on EC website] - Sent request",
        "source" : "fff7a2846fc35929.txt",
        "type" : "text/plain",
        "size" : 9082
      }, {
        "uid" : "fe68757464317c74",
        "name" : "Step: [the user tries to pay a cart of RPTs on EC website] - Received response",
        "source" : "fe68757464317c74.txt",
        "type" : "text/plain",
        "size" : 409
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Then the user is redirected on Checkout completing the payment",
      "time" : {
        "start" : 1745744207012,
        "stop" : 1745744229272,
        "duration" : 22260
      },
      "status" : "failed",
      "statusMessage" : "AssertionError: There are not events with business process receipt-ok.\n",
      "statusTrace" : "  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src/bdd/wisp/steps/steps.py\", line 195, in user_redirected_to_checkout\n    steputils.check_wisp_session_timers_del_and_rts_were_sent(context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 894, in check_wisp_session_timers_del_and_rts_were_sent\n    check_event(context, 'receipt-ok', 'status', 'RT_SEND_SUCCESS')\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/steps_utils.py\", line 400, in check_event\n    utils.assert_show_message(len(needed_process_events) > 0,\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                              f'There are not events with business process {business_process}.')\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/pagopa-platform-integration-test/pagopa-platform-integration-test/src/utility/wisp/utils.py\", line 133, in assert_show_message\n    assert assertion_value, message\n           ^^^^^^^^^^^^^^^\n",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "6b99dc0fcac6cdd0",
        "name" : "Received response",
        "source" : "6b99dc0fcac6cdd0.attach",
        "type" : "text/plain",
        "size" : 131
      }, {
        "uid" : "5f5a13be36b48fd8",
        "name" : "Step: [the user is redirected on Checkout completing the payment]: on IUV: [586396356540795] - Received response",
        "source" : "5f5a13be36b48fd8.txt",
        "type" : "text/plain",
        "size" : 31615
      }, {
        "uid" : "fcc6521a0a6b98e4",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Sent request",
        "source" : "fcc6521a0a6b98e4.txt",
        "type" : "text/plain",
        "size" : 167
      }, {
        "uid" : "9543972b73fc29fa",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Received response",
        "source" : "9543972b73fc29fa.txt",
        "type" : "text/plain",
        "size" : 242
      }, {
        "uid" : "513ca1371e4a3fcb",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Sent request",
        "source" : "513ca1371e4a3fcb.txt",
        "type" : "text/plain",
        "size" : 821
      }, {
        "uid" : "cd59ba6fafb898c4",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Received response",
        "source" : "cd59ba6fafb898c4.txt",
        "type" : "text/plain",
        "size" : 1461
      }, {
        "uid" : "3ae680e4dff87db8",
        "name" : "Step: [the user is redirected on Checkout completing the payment]: on IUV: [586396356540795] - Received response",
        "source" : "3ae680e4dff87db8.txt",
        "type" : "text/plain",
        "size" : 33961
      }, {
        "uid" : "a79904a5aec66f02",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Sent request",
        "source" : "a79904a5aec66f02.txt",
        "type" : "text/plain",
        "size" : 1253
      }, {
        "uid" : "cb553428d119ab23",
        "name" : "Step: [the user is redirected on Checkout completing the payment] - Received response",
        "source" : "cb553428d119ab23.txt",
        "type" : "text/plain",
        "size" : 104
      }, {
        "uid" : "72c9ecb134c62b0a",
        "name" : "Step: [the user is redirected on Checkout completing the payment]: on IUV: [586396356540795] - Received response",
        "source" : "72c9ecb134c62b0a.txt",
        "type" : "text/plain",
        "size" : 50383
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 10,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    }, {
      "name" : "And the debt position is closed",
      "time" : {
        "start" : 1745744229273,
        "stop" : 1745744229273,
        "duration" : 0
      },
      "status" : "skipped",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 7,
    "attachmentsCount" : 13,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "severity",
    "value" : "normal"
  }, {
    "name" : "tag",
    "value" : "happy_path"
  }, {
    "name" : "tag",
    "value" : "nodo_invia_carrello_rpt"
  }, {
    "name" : "tag",
    "value" : "runnable"
  }, {
    "name" : "feature",
    "value" : "User pays a payment carts from existing payment position via nodoInviaCarrelloRPT"
  }, {
    "name" : "framework",
    "value" : "behave"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "history" : {
      "statistic" : {
        "failed" : 52,
        "broken" : 0,
        "skipped" : 0,
        "passed" : 68,
        "unknown" : 0,
        "total" : 120
      },
      "items" : [ {
        "uid" : "2fbe619c978fa9ae",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/429//#testresult/2fbe619c978fa9ae",
        "status" : "passed",
        "time" : {
          "start" : 1745717620877,
          "stop" : 1745717648816,
          "duration" : 27939
        }
      }, {
        "uid" : "abd6323bcbb3ab48",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/424//#testresult/abd6323bcbb3ab48",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745631202807,
          "stop" : 1745631228677,
          "duration" : 25870
        }
      }, {
        "uid" : "2410e8ec5241d181",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/423//#testresult/2410e8ec5241d181",
        "status" : "passed",
        "time" : {
          "start" : 1745544836435,
          "stop" : 1745544862746,
          "duration" : 26311
        }
      }, {
        "uid" : "1df9309eb896e44c",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/422//#testresult/1df9309eb896e44c",
        "status" : "passed",
        "time" : {
          "start" : 1745458430990,
          "stop" : 1745458457070,
          "duration" : 26080
        }
      }, {
        "uid" : "aee6aa31a70a2281",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/421//#testresult/aee6aa31a70a2281",
        "status" : "passed",
        "time" : {
          "start" : 1745372029790,
          "stop" : 1745372058993,
          "duration" : 29203
        }
      }, {
        "uid" : "af580ff745d0c123",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/420//#testresult/af580ff745d0c123",
        "status" : "passed",
        "time" : {
          "start" : 1745285635277,
          "stop" : 1745285661411,
          "duration" : 26134
        }
      }, {
        "uid" : "b36bb0e8cccb2790",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/419//#testresult/b36bb0e8cccb2790",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745199249579,
          "stop" : 1745199280160,
          "duration" : 30581
        }
      }, {
        "uid" : "5034a9ef952fcdd7",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/418//#testresult/5034a9ef952fcdd7",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745112819887,
          "stop" : 1745112842448,
          "duration" : 22561
        }
      }, {
        "uid" : "3e8080285d52ad4e",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/417//#testresult/3e8080285d52ad4e",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1745026400133,
          "stop" : 1745026426111,
          "duration" : 25978
        }
      }, {
        "uid" : "fbd3533873248c63",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/416//#testresult/fbd3533873248c63",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744940015960,
          "stop" : 1744940038571,
          "duration" : 22611
        }
      }, {
        "uid" : "5fb0f2ff7dc1ee38",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/415//#testresult/5fb0f2ff7dc1ee38",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744853615610,
          "stop" : 1744853638493,
          "duration" : 22883
        }
      }, {
        "uid" : "12a2e8335e099cbe",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/414//#testresult/12a2e8335e099cbe",
        "status" : "passed",
        "time" : {
          "start" : 1744806421036,
          "stop" : 1744806446447,
          "duration" : 25411
        }
      }, {
        "uid" : "92e81c11bc3c19b4",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/413//#testresult/92e81c11bc3c19b4",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744767245558,
          "stop" : 1744767268624,
          "duration" : 23066
        }
      }, {
        "uid" : "ced454eaf70805a7",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/412//#testresult/ced454eaf70805a7",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744680834057,
          "stop" : 1744680859561,
          "duration" : 25504
        }
      }, {
        "uid" : "88f2b4b450f91918",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/411//#testresult/88f2b4b450f91918",
        "status" : "passed",
        "time" : {
          "start" : 1744594429952,
          "stop" : 1744594456153,
          "duration" : 26201
        }
      }, {
        "uid" : "fcfef62eb7205597",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/410//#testresult/fcfef62eb7205597",
        "status" : "passed",
        "time" : {
          "start" : 1744509124091,
          "stop" : 1744509150218,
          "duration" : 26127
        }
      }, {
        "uid" : "85aff1c001b7f3d5",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/409//#testresult/85aff1c001b7f3d5",
        "status" : "passed",
        "time" : {
          "start" : 1744421578374,
          "stop" : 1744421603586,
          "duration" : 25212
        }
      }, {
        "uid" : "bd6dd90832ef08d8",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/408//#testresult/bd6dd90832ef08d8",
        "status" : "passed",
        "time" : {
          "start" : 1744335219946,
          "stop" : 1744335246362,
          "duration" : 26416
        }
      }, {
        "uid" : "3448610774c92ba8",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/407//#testresult/3448610774c92ba8",
        "status" : "passed",
        "time" : {
          "start" : 1744248806321,
          "stop" : 1744248831741,
          "duration" : 25420
        }
      }, {
        "uid" : "d99a626ef22d4d2a",
        "reportUrl" : "https://pagopa.github.io/pagopa-platform-integration-test/wisp-tests/406//#testresult/d99a626ef22d4d2a",
        "status" : "failed",
        "statusDetails" : "AssertionError: There are not events with business process receipt-ok.\n",
        "time" : {
          "start" : 1744162404885,
          "stop" : 1744162427166,
          "duration" : 22281
        }
      } ]
    },
    "tags" : [ "runnable", "nodo_invia_carrello_rpt", "happy_path" ]
  },
  "source" : "65d9d5d9abe1a039.json",
  "parameterValues" : [ ]
}