[
{"keyword": "Feature", "name": "User pays a single payment from existing payment position via nodoInviaRPT", "tags": [], "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:1", "status": "failed", "elements": [{"type": "background", "keyword": "Background", "name": "", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:3", "steps": [{"keyword": "Given", "step_type": "given", "name": "systems up", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:4"}]}, {"type": "scenario", "keyword": "Scenario", "name": "User tries to pay a single payment on nodoInviaRPT that was inserted from ACA and is in invalid state", "tags": ["runnable", "nodo_invia_rpt", "unhappy_path1"], "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:60", "steps": [{"keyword": "Given", "step_type": "given", "name": "systems up", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:4", "match": {"location": "src/bdd/steps/healthcheck.py:10", "arguments": []}, "result": {"status": "passed", "duration": 0.7607934474945068}}, {"keyword": "Given", "step_type": "given", "name": "a single RPT of type BBT with 1 transfers of which 0 are stamps", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:61", "match": {"location": "src/bdd/steps/steps.py:47", "arguments": [{"value": "BBT", "name": "payment_type"}, {"value": "1", "name": "number_of_transfers"}, {"value": "0", "name": "number_of_stamps"}]}, "result": {"status": "passed", "duration": 0.03614521026611328}}, {"keyword": "And", "step_type": "given", "name": "an existing payment position related to first RPT with segregation code equals to 01 and state equals to DRAFT", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:62", "match": {"location": "src/bdd/steps/steps.py:137", "arguments": [{"value": "first", "name": "index"}, {"value": "01", "name": "segregation_code"}, {"value": "DRAFT", "name": "payment_status"}]}, "result": {"status": "passed", "duration": 0.5218460559844971}}, {"keyword": "When", "step_type": "when", "name": "the execution of \"Send a nodoInviaRPT request\" was successful", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:63", "match": {"location": "src/bdd/steps/steps.py:173", "arguments": [{"value": "Send a nodoInviaRPT request", "name": "scenario_name"}]}, "result": {"status": "passed", "duration": 0.687816858291626}}, {"keyword": "Then", "step_type": "then", "name": "the execution of \"Fails on execute NM1-to-NMU conversion in wisp-converter\" was successful", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:64", "match": {"location": "src/bdd/steps/steps.py:173", "arguments": [{"value": "Fails on execute NM1-to-NMU conversion in wisp-converter", "name": "scenario_name"}]}, "result": {"status": "passed", "duration": 1.2241029739379883}}, {"keyword": "And", "step_type": "then", "name": "the execution of \"Check if existing debt position was invalid but has sent a KO receipt\" was successful", "location": "src/bdd/features/nodoInviaRPT/nodoInviaRPT_existingPaymentPosition.feature:65", "match": {"location": "src/bdd/steps/steps.py:173", "arguments": [{"value": "Check if existing debt position was invalid but has sent a KO receipt", "name": "scenario_name"}]}, "result": {"status": "failed", "duration": 2.990447521209717, "error_message": ["Assertion Failed: FAILED SUB-STEP: And there is a redirect event with field operationErrorCode with value WIC-1300", "Substep info: Assertion Failed: There are not events with business process redirect and field operationErrorCode with value [WIC-1300].", "Traceback (of failed substep):", "  File \"/mnt/c/Users/r.gheorghe/PycharmProjects/pagopa-platform-integration-test/.venvPa/lib/python3.10/site-packages/behave/model.py\", line 1329, in run", "    match.run(runner.context)", "  File \"/mnt/c/Users/r.gheorghe/PycharmProjects/pagopa-platform-integration-test/.venvPa/lib/python3.10/site-packages/behave/matchers.py\", line 98, in run", "    self.func(context, *args, **kwargs)", "  File \"src/bdd/steps/steps.py\", line 219, in check_event", "    utils.assert_show_message(len(needed_events) > 0,", "  File \"/mnt/c/Users/r.gheorghe/PycharmProjects/pagopa-platform-integration-test/src/utility/utils.py\", line 133, in assert_show_message", "    assert assertion_value, message", "", "Captured logging:", "INFO:root:Response status code: 200", "INFO:root:Response body: <Element 'Envelope' at 0x7f5a8445c450>", "INFO:root:Waiting [2] seconds to wait for Nodo to write RE events", "INFO:root:Wait time ended", "ERROR:root:[Assert Error] There are not events with business process redirect and field operationErrorCode with value [WIC-1300]."]}}], "status": "failed"}]}
]
